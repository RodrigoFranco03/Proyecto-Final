import PyPDF2
from PyPDF2 import PdfReader


def lector(archivo_pdf): #funcion para leer el pdf
    with open(archivo_pdf, "rb") as f: 
        reader = PdfReader(f)
        resultado = [] #convertir el pdf a una lista
        for i in range(0, len(reader.pages)): #leer todas las paginas
            pagina_seleccionada = reader.pages[i]
            texto = pagina_seleccionada.extract_text()
            resultado.append(texto)
        return ' '.join(resultado) #juntar paginas



def comunes(pdf1, pdf2): #encontrar parrafo comunes
    palabras_pdf = lector(pdf1)
    palabras_pdf2 = lector(pdf2)
    lista_parrafos = palabras_pdf.split('\n')#parrafo pdf1
    lista_parrafos2 = palabras_pdf2.split('\n')#parrafo pdf2

    lista_frase2 = palabras_pdf2.split('\n')#parrafo del diccionario 
    resultado = [] #lista vacia
    for parrafo1 in lista_parrafos: #sacar parrafos
        for parrafo2 in lista_parrafos2:
            if parrafo1 == parrafo2:
                resultado.append(parrafo1)
    for palabra in lista_frase2:
        secuencia = ""
        j = 0
        for i in range (len(palabras_pdf) - len(lista_frase2[j])):
            secuencia = palabras_pdf[i:i+len(lista_frase2)]
            print (secuencia + " = " + lista_frase2[j])
            if (secuencia == lista_frase2):
                resultado.append(lista_frase2)
        j = j+1
    return resultado


#llamar funcion comunes
parrafos_comunes = comunes("Eclipse.pdf", "Eclise_diccionario.pdf")

#print("Escribe la direccion del PDF a comparar: ")
#print ("Escribe la direccion del diccionario: ")

###imprimir = lector("Eclise_diccionario.pdf")
###print (imprimir)

# imprime parrafo comunes
if parrafos_comunes:
    with open("Resultado.txt", "w") as archivo:
        archivo.write("Los parrafos comunes en el PDF y en el diccionario son:"+ '\n')
        for elemento in parrafos_comunes:
            archivo.write(elemento + '\n')
    
else:
    with open("Resultado.txt", "w") as archivo:
        archivo.write("No hay parafos comunes")
